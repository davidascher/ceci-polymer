<polymer-element>
  <template>
    <style></style>
    <!-- <div class="checker">
      Just Giving Donation
    </div> -->
  </template>
  <script>
    Polymer("justgiving", {
      ready: function () {
        this.ceci({
          broadcasts: [],
          defaultBroadcasts: undefined,
          defaultListeners: ["checkNumber"],
          editable: {
            yourJustGivingPageName: {
              type: "text",
              description: "You can get this from you Just Giving fundraising url justgiving.com/your-page-name-is-here",
              postset: function (v) {
                }
            },
          },
          listeners: {
            checkNumber: function (listener,channel) {          
          
                        this.incomingNumber = parseInt(listener) || false;
                        if (this.incomingNumber) {
                          var jgURL = "http://www.justgiving.com/" + this.yourJustGivingPageName + "/donate?amount=" + this.incomingNumber;
                          if (confirm("This will take you to my fundraising page on JustGiving.com. Please give generously!")) {
                           window.location.replace(jgURL);
                          };           
                        } else {
                          console.log("no donation amount chosen");
                        }
                        // build url        
                        // confirm dialog
                        // redirect
                      }
          },
          friends: [""],
          thumbnail: "<img src="{{ASSET_HOST}}/assets/images/thumbnails/app-number-checker.png" />",
          description: "Checks if an incoming number meets a certain criteria.",
          tags: ["justgiving.html"]
        });
      },
      
    });
  </script>
</polymer-element>